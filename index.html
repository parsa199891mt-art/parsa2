<!doctype html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>من تمیزم — یادآور سریع تمیزی</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7c3aed;--accent2:#06b6d4;--muted:#9aa4b2}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: Vazirmatn, Tahoma, sans-serif;background:linear-gradient(180deg,var(--bg) 0%, #071029 100%);color:#e6eef6}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:32px}
    .card{width:100%;max-width:820px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border-radius:16px;padding:24px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    header{display:flex;align-items:center;gap:16px}
    .logo{width:64px;height:64px;border-radius:12px;display:grid;place-items:center;font-weight:700;font-size:22px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:white}
    h1{margin:0;font-size:1.6rem}
    p.lead{margin:6px 0 18px;color:var(--muted)}

    .controls{display:flex;gap:12px;flex-wrap:wrap}
    .btn{background:var(--accent);border:none;padding:10px 16px;border-radius:10px;color:white;font-weight:600;cursor:pointer;box-shadow:0 6px 14px rgba(124,58,237,0.18)}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#dbeafe}
    .btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.06)}

    .grid{display:grid;grid-template-columns:1fr 320px;gap:20px;margin-top:20px}

    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:12px}
    .tips li{margin:8px 0;color:var(--muted)}

    .timer{display:flex;flex-direction:column;align-items:center;gap:10px}
    .big{font-size:2.6rem;font-weight:700}
    .small{color:var(--muted)}
    .progress{width:220px;height:220px;border-radius:50%;display:grid;place-items:center;background:conic-gradient(var(--accent) 0deg, rgba(255,255,255,0.04) 0deg);box-shadow:inset 0 -12px 40px rgba(12,22,40,0.6)}

    .settings{display:flex;flex-direction:column;gap:8px;margin-top:12px}
    input[type=number]{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    label{font-size:0.9rem;color:var(--muted)}

    footer{display:flex;justify-content:space-between;align-items:center;margin-top:16px;color:var(--muted);font-size:0.9rem}

    @media (max-width:760px){.grid{grid-template-columns:1fr;}.progress{width:180px;height:180px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main">
      <header>
        <div class="logo">تمیز</div>
        <div>
          <h1>من تمیزم — یادآور سریع تمیزی</h1>
          <p class="lead">وقتی روز شلوغه و فرصت حموم نیست: یادآورها، تایمر سریع و ترفندهای تمیزی فوری.</p>
        </div>
      </header>

      <div class="controls" style="margin-top:14px">
        <button class="btn" id="quickClean">نکات ۲ دقیقه‌ای</button>
        <button class="btn secondary" id="startTimer">شروع تایمر کوتاه (5 دقیقه)</button>
        <button class="btn ghost" id="markClean">الان تمیزم</button>
        <button class="btn" id="setReminder">یادآوری برای بعد</button>
      </div>

      <div class="grid">
        <div class="panel">
          <h3>ترفندهای سریع برای وقتی حموم نمیشه</h3>
          <ul class="tips" id="tipsList">
            <li>از دستمال مرطوب یا آب و صابون برای زیر بغل و گردن استفاده کن.</li>
            <li>خشک‌شامپو یا پودر بچه برای رفع چربی موها مفیده.</li>
            <li>لباس پاک و عوض‌شده باعث میشه تمیزتر حس کنی.</li>
            <li>مسواک زدن + دهان‌شویه برای حس تازه بودن فوری.</li>
            <li>اگر وقت رفتن به حموم نداری، صورت و ناحیه گردن را با آب و صابون بشور.</li>
          </ul>

          <div class="settings">
            <label>یادآوری در چند دقیقه؟</label>
            <input type="number" id="reminderMinutes" min="1" max="1440" value="60">
            <small style="color:var(--muted)">زمان را وارد کن و روی «یادآوری برای بعد» بزن</small>
          </div>
        </div>

        <div class="panel timer">
          <div class="progress" id="progress">
            <div style="text-align:center">
              <div class="big" id="timeDisplay">0:00</div>
              <div class="small">تایمر</div>
            </div>
          </div>

          <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;justify-content:center">
            <button class="btn" id="start5">5 دقیقه</button>
            <button class="btn secondary" id="start2">2 دقیقه</button>
            <button class="btn ghost" id="stopTimer">توقف</button>
          </div>

          <div style="margin-top:12px;text-align:center;color:var(--muted)">
            <div id="status">آماده</div>
          </div>
        </div>
      </div>

      <footer>
        <div>ذخیره در مرورگر: <strong id="saved">خیر</strong></div>
        <div>نسخهٔ تک‌صفحه‌ای</div>
      </footer>
    </div>
  </div>

  <script>
    // عناصر
    const tipsList = document.getElementById('tipsList');
    const quickClean = document.getElementById('quickClean');
    const startTimer = document.getElementById('startTimer');
    const start5 = document.getElementById('start5');
    const start2 = document.getElementById('start2');
    const stopTimer = document.getElementById('stopTimer');
    const timeDisplay = document.getElementById('timeDisplay');
    const progress = document.getElementById('progress');
    const status = document.getElementById('status');
    const markClean = document.getElementById('markClean');
    const setReminder = document.getElementById('setReminder');
    const reminderMinutes = document.getElementById('reminderMinutes');
    const saved = document.getElementById('saved');

    // صدا ساده با Web Audio API
    function beep(freq=880,dur=150){
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine'; o.frequency.value = freq; g.gain.value = 0.08;
        o.connect(g); g.connect(ctx.destination);
        o.start();
        setTimeout(()=>{ o.stop(); ctx.close(); }, dur);
      }catch(e){ /* بعضی مرورگرها محدودیت دارند */ }
    }

    // تایمر
    let timerId = null; let totalSec = 0; let remain = 0;
    function startCountdown(minutes){
      clearInterval(timerId);
      totalSec = minutes*60; remain = totalSec;
      updateProgress();
      status.textContent = 'در حال اجرا';
      timerId = setInterval(()=>{
        remain--;
        updateProgress();
        if(remain<=0){ clearInterval(timerId); status.textContent='تمام شد'; beep(660,300); alert('⏰ تایمر تمام شد — فرصت سریع تمیز شدن!'); }
      },1000);
    }
    function stopCountdown(){ clearInterval(timerId); status.textContent='متوقف'; }

    function updateProgress(){
      const m = Math.floor(remain/60); const s = remain%60;
      timeDisplay.textContent = `${m}:${String(s).padStart(2,'0')}`;
      const pct = totalSec ? Math.round((1 - remain/totalSec) * 360) : 0;
      progress.style.background = `conic-gradient(var(--accent) ${pct}deg, rgba(255,255,255,0.03) ${pct}deg)`;
    }

    // دکمه‌ها
    quickClean.addEventListener('click', ()=>{
      alert('نکات ۲ دقیقه‌ای:\n• زیر بغل و گردن را با آب و صابون بشور\n• موها را با خش‌شامپو یا شانه مرتب کن\n• مسواک و دهان‌شویه را فراموش نکن');
      beep(880,120);
    });
    startTimer.addEventListener('click', ()=>{ startCountdown(5); });
    start5.addEventListener('click', ()=>{ startCountdown(5); });
    start2.addEventListener('click', ()=>{ startCountdown(2); });
    stopTimer.addEventListener('click', stopCountdown);

    // علامت‌گذاری تمیزی
    markClean.addEventListener('click', ()=>{
      alert('🎉 عالی! تو الان تمیزی — یک امتیاز به خودت بده :)');
      beep(1000,160);
    });

    // یادآوری در آینده (local notification via setTimeout while tab open + save in localStorage)
    setReminder.addEventListener('click', ()=>{
      const mins = parseInt(reminderMinutes.value)||0;
      if(mins<=0){ alert('لطفاً یک عدد معتبر وارد کن'); return; }
      const wake = Date.now() + mins*60*1000;
      localStorage.setItem('showerReminder', String(wake));
      saved.textContent = 'بله';
      scheduleCheck();
      alert('✅ یادآوری تنظیم شد برای ' + mins + ' دقیقهٔ دیگر');
    });

    function scheduleCheck(){
      const v = localStorage.getItem('showerReminder');
      if(!v) return;
      const when = parseInt(v);
      const diff = when - Date.now();
      if(diff<=0){ // اگر گذشته
        notifyNow(); localStorage.removeItem('showerReminder'); saved.textContent='خیر';
      } else {
        saved.textContent='بله';
        setTimeout(()=>{ notifyNow(); localStorage.removeItem('showerReminder'); saved.textContent='خیر'; }, diff);
      }
    }

    function notifyNow(){
      beep(720,300);
      const ok = confirm('🔔 زمان حموم یا تمیز شدن است! می‌خوای یادداشت بزارم یا همین حالا انجام بدی؟');
      if(ok){ alert('خوش به حالت!'); }
    }

    // اجرا در بارگذاری
    scheduleCheck(); updateProgress();

    // پیشنهاد: وقتی کاربر صفحه را می‌بندد، یادآوری دوباره نشود ولی ذخیره باقی بماند
    window.addEventListener('beforeunload', ()=>{});
  </script>
</body>
</html>
