<!doctype html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…Ù† ØªÙ…ÛŒØ²Ù… â€” ÛŒØ§Ø¯Ø¢ÙˆØ± Ø³Ø±ÛŒØ¹ ØªÙ…ÛŒØ²ÛŒ</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7c3aed;--accent2:#06b6d4;--muted:#9aa4b2}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: Vazirmatn, Tahoma, sans-serif;background:linear-gradient(180deg,var(--bg) 0%, #071029 100%);color:#e6eef6}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:32px}
    .card{width:100%;max-width:820px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border-radius:16px;padding:24px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    header{display:flex;align-items:center;gap:16px}
    .logo{width:64px;height:64px;border-radius:12px;display:grid;place-items:center;font-weight:700;font-size:22px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:white}
    h1{margin:0;font-size:1.6rem}
    p.lead{margin:6px 0 18px;color:var(--muted)}

    .controls{display:flex;gap:12px;flex-wrap:wrap}
    .btn{background:var(--accent);border:none;padding:10px 16px;border-radius:10px;color:white;font-weight:600;cursor:pointer;box-shadow:0 6px 14px rgba(124,58,237,0.18)}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#dbeafe}
    .btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.06)}

    .grid{display:grid;grid-template-columns:1fr 320px;gap:20px;margin-top:20px}

    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:12px}
    .tips li{margin:8px 0;color:var(--muted)}

    .timer{display:flex;flex-direction:column;align-items:center;gap:10px}
    .big{font-size:2.6rem;font-weight:700}
    .small{color:var(--muted)}
    .progress{width:220px;height:220px;border-radius:50%;display:grid;place-items:center;background:conic-gradient(var(--accent) 0deg, rgba(255,255,255,0.04) 0deg);box-shadow:inset 0 -12px 40px rgba(12,22,40,0.6)}

    .settings{display:flex;flex-direction:column;gap:8px;margin-top:12px}
    input[type=number]{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    label{font-size:0.9rem;color:var(--muted)}

    footer{display:flex;justify-content:space-between;align-items:center;margin-top:16px;color:var(--muted);font-size:0.9rem}

    @media (max-width:760px){.grid{grid-template-columns:1fr;}.progress{width:180px;height:180px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main">
      <header>
        <div class="logo">ØªÙ…ÛŒØ²</div>
        <div>
          <h1>Ù…Ù† ØªÙ…ÛŒØ²Ù… â€” ÛŒØ§Ø¯Ø¢ÙˆØ± Ø³Ø±ÛŒØ¹ ØªÙ…ÛŒØ²ÛŒ</h1>
          <p class="lead">ÙˆÙ‚ØªÛŒ Ø±ÙˆØ² Ø´Ù„ÙˆØºÙ‡ Ùˆ ÙØ±ØµØª Ø­Ù…ÙˆÙ… Ù†ÛŒØ³Øª: ÛŒØ§Ø¯Ø¢ÙˆØ±Ù‡Ø§ØŒ ØªØ§ÛŒÙ…Ø± Ø³Ø±ÛŒØ¹ Ùˆ ØªØ±ÙÙ†Ø¯Ù‡Ø§ÛŒ ØªÙ…ÛŒØ²ÛŒ ÙÙˆØ±ÛŒ.</p>
        </div>
      </header>

      <div class="controls" style="margin-top:14px">
        <button class="btn" id="quickClean">Ù†Ú©Ø§Øª Û² Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ</button>
        <button class="btn secondary" id="startTimer">Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø± Ú©ÙˆØªØ§Ù‡ (5 Ø¯Ù‚ÛŒÙ‚Ù‡)</button>
        <button class="btn ghost" id="markClean">Ø§Ù„Ø§Ù† ØªÙ…ÛŒØ²Ù…</button>
        <button class="btn" id="setReminder">ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø¹Ø¯</button>
      </div>

      <div class="grid">
        <div class="panel">
          <h3>ØªØ±ÙÙ†Ø¯Ù‡Ø§ÛŒ Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ ÙˆÙ‚ØªÛŒ Ø­Ù…ÙˆÙ… Ù†Ù…ÛŒØ´Ù‡</h3>
          <ul class="tips" id="tipsList">
            <li>Ø§Ø² Ø¯Ø³ØªÙ…Ø§Ù„ Ù…Ø±Ø·ÙˆØ¨ ÛŒØ§ Ø¢Ø¨ Ùˆ ØµØ§Ø¨ÙˆÙ† Ø¨Ø±Ø§ÛŒ Ø²ÛŒØ± Ø¨ØºÙ„ Ùˆ Ú¯Ø±Ø¯Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†.</li>
            <li>Ø®Ø´Ú©â€ŒØ´Ø§Ù…Ù¾Ùˆ ÛŒØ§ Ù¾ÙˆØ¯Ø± Ø¨Ú†Ù‡ Ø¨Ø±Ø§ÛŒ Ø±ÙØ¹ Ú†Ø±Ø¨ÛŒ Ù…ÙˆÙ‡Ø§ Ù…ÙÛŒØ¯Ù‡.</li>
            <li>Ù„Ø¨Ø§Ø³ Ù¾Ø§Ú© Ùˆ Ø¹ÙˆØ¶â€ŒØ´Ø¯Ù‡ Ø¨Ø§Ø¹Ø« Ù…ÛŒØ´Ù‡ ØªÙ…ÛŒØ²ØªØ± Ø­Ø³ Ú©Ù†ÛŒ.</li>
            <li>Ù…Ø³ÙˆØ§Ú© Ø²Ø¯Ù† + Ø¯Ù‡Ø§Ù†â€ŒØ´ÙˆÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø­Ø³ ØªØ§Ø²Ù‡ Ø¨ÙˆØ¯Ù† ÙÙˆØ±ÛŒ.</li>
            <li>Ø§Ú¯Ø± ÙˆÙ‚Øª Ø±ÙØªÙ† Ø¨Ù‡ Ø­Ù…ÙˆÙ… Ù†Ø¯Ø§Ø±ÛŒØŒ ØµÙˆØ±Øª Ùˆ Ù†Ø§Ø­ÛŒÙ‡ Ú¯Ø±Ø¯Ù† Ø±Ø§ Ø¨Ø§ Ø¢Ø¨ Ùˆ ØµØ§Ø¨ÙˆÙ† Ø¨Ø´ÙˆØ±.</li>
          </ul>

          <div class="settings">
            <label>ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¯Ø± Ú†Ù†Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡ØŸ</label>
            <input type="number" id="reminderMinutes" min="1" max="1440" value="60">
            <small style="color:var(--muted)">Ø²Ù…Ø§Ù† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù† Ùˆ Ø±ÙˆÛŒ Â«ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø¹Ø¯Â» Ø¨Ø²Ù†</small>
          </div>
        </div>

        <div class="panel timer">
          <div class="progress" id="progress">
            <div style="text-align:center">
              <div class="big" id="timeDisplay">0:00</div>
              <div class="small">ØªØ§ÛŒÙ…Ø±</div>
            </div>
          </div>

          <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;justify-content:center">
            <button class="btn" id="start5">5 Ø¯Ù‚ÛŒÙ‚Ù‡</button>
            <button class="btn secondary" id="start2">2 Ø¯Ù‚ÛŒÙ‚Ù‡</button>
            <button class="btn ghost" id="stopTimer">ØªÙˆÙ‚Ù</button>
          </div>

          <div style="margin-top:12px;text-align:center;color:var(--muted)">
            <div id="status">Ø¢Ù…Ø§Ø¯Ù‡</div>
          </div>
        </div>
      </div>

      <footer>
        <div>Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø±: <strong id="saved">Ø®ÛŒØ±</strong></div>
        <div>Ù†Ø³Ø®Ù‡Ù” ØªÚ©â€ŒØµÙØ­Ù‡â€ŒØ§ÛŒ</div>
      </footer>
    </div>
  </div>

  <script>
    // Ø¹Ù†Ø§ØµØ±
    const tipsList = document.getElementById('tipsList');
    const quickClean = document.getElementById('quickClean');
    const startTimer = document.getElementById('startTimer');
    const start5 = document.getElementById('start5');
    const start2 = document.getElementById('start2');
    const stopTimer = document.getElementById('stopTimer');
    const timeDisplay = document.getElementById('timeDisplay');
    const progress = document.getElementById('progress');
    const status = document.getElementById('status');
    const markClean = document.getElementById('markClean');
    const setReminder = document.getElementById('setReminder');
    const reminderMinutes = document.getElementById('reminderMinutes');
    const saved = document.getElementById('saved');

    // ØµØ¯Ø§ Ø³Ø§Ø¯Ù‡ Ø¨Ø§ Web Audio API
    function beep(freq=880,dur=150){
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine'; o.frequency.value = freq; g.gain.value = 0.08;
        o.connect(g); g.connect(ctx.destination);
        o.start();
        setTimeout(()=>{ o.stop(); ctx.close(); }, dur);
      }catch(e){ /* Ø¨Ø¹Ø¶ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯Ø§Ø±Ù†Ø¯ */ }
    }

    // ØªØ§ÛŒÙ…Ø±
    let timerId = null; let totalSec = 0; let remain = 0;
    function startCountdown(minutes){
      clearInterval(timerId);
      totalSec = minutes*60; remain = totalSec;
      updateProgress();
      status.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§';
      timerId = setInterval(()=>{
        remain--;
        updateProgress();
        if(remain<=0){ clearInterval(timerId); status.textContent='ØªÙ…Ø§Ù… Ø´Ø¯'; beep(660,300); alert('â° ØªØ§ÛŒÙ…Ø± ØªÙ…Ø§Ù… Ø´Ø¯ â€” ÙØ±ØµØª Ø³Ø±ÛŒØ¹ ØªÙ…ÛŒØ² Ø´Ø¯Ù†!'); }
      },1000);
    }
    function stopCountdown(){ clearInterval(timerId); status.textContent='Ù…ØªÙˆÙ‚Ù'; }

    function updateProgress(){
      const m = Math.floor(remain/60); const s = remain%60;
      timeDisplay.textContent = `${m}:${String(s).padStart(2,'0')}`;
      const pct = totalSec ? Math.round((1 - remain/totalSec) * 360) : 0;
      progress.style.background = `conic-gradient(var(--accent) ${pct}deg, rgba(255,255,255,0.03) ${pct}deg)`;
    }

    // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
    quickClean.addEventListener('click', ()=>{
      alert('Ù†Ú©Ø§Øª Û² Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ:\nâ€¢ Ø²ÛŒØ± Ø¨ØºÙ„ Ùˆ Ú¯Ø±Ø¯Ù† Ø±Ø§ Ø¨Ø§ Ø¢Ø¨ Ùˆ ØµØ§Ø¨ÙˆÙ† Ø¨Ø´ÙˆØ±\nâ€¢ Ù…ÙˆÙ‡Ø§ Ø±Ø§ Ø¨Ø§ Ø®Ø´â€ŒØ´Ø§Ù…Ù¾Ùˆ ÛŒØ§ Ø´Ø§Ù†Ù‡ Ù…Ø±ØªØ¨ Ú©Ù†\nâ€¢ Ù…Ø³ÙˆØ§Ú© Ùˆ Ø¯Ù‡Ø§Ù†â€ŒØ´ÙˆÛŒÙ‡ Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ù†Ú©Ù†');
      beep(880,120);
    });
    startTimer.addEventListener('click', ()=>{ startCountdown(5); });
    start5.addEventListener('click', ()=>{ startCountdown(5); });
    start2.addEventListener('click', ()=>{ startCountdown(2); });
    stopTimer.addEventListener('click', stopCountdown);

    // Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ ØªÙ…ÛŒØ²ÛŒ
    markClean.addEventListener('click', ()=>{
      alert('ğŸ‰ Ø¹Ø§Ù„ÛŒ! ØªÙˆ Ø§Ù„Ø§Ù† ØªÙ…ÛŒØ²ÛŒ â€” ÛŒÚ© Ø§Ù…ØªÛŒØ§Ø² Ø¨Ù‡ Ø®ÙˆØ¯Øª Ø¨Ø¯Ù‡ :)');
      beep(1000,160);
    });

    // ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¯Ø± Ø¢ÛŒÙ†Ø¯Ù‡ (local notification via setTimeout while tab open + save in localStorage)
    setReminder.addEventListener('click', ()=>{
      const mins = parseInt(reminderMinutes.value)||0;
      if(mins<=0){ alert('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø¹Ø¯Ø¯ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†'); return; }
      const wake = Date.now() + mins*60*1000;
      localStorage.setItem('showerReminder', String(wake));
      saved.textContent = 'Ø¨Ù„Ù‡';
      scheduleCheck();
      alert('âœ… ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯ Ø¨Ø±Ø§ÛŒ ' + mins + ' Ø¯Ù‚ÛŒÙ‚Ù‡Ù” Ø¯ÛŒÚ¯Ø±');
    });

    function scheduleCheck(){
      const v = localStorage.getItem('showerReminder');
      if(!v) return;
      const when = parseInt(v);
      const diff = when - Date.now();
      if(diff<=0){ // Ø§Ú¯Ø± Ú¯Ø°Ø´ØªÙ‡
        notifyNow(); localStorage.removeItem('showerReminder'); saved.textContent='Ø®ÛŒØ±';
      } else {
        saved.textContent='Ø¨Ù„Ù‡';
        setTimeout(()=>{ notifyNow(); localStorage.removeItem('showerReminder'); saved.textContent='Ø®ÛŒØ±'; }, diff);
      }
    }

    function notifyNow(){
      beep(720,300);
      const ok = confirm('ğŸ”” Ø²Ù…Ø§Ù† Ø­Ù…ÙˆÙ… ÛŒØ§ ØªÙ…ÛŒØ² Ø´Ø¯Ù† Ø§Ø³Øª! Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø¨Ø²Ø§Ø±Ù… ÛŒØ§ Ù‡Ù…ÛŒÙ† Ø­Ø§Ù„Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯ÛŒØŸ');
      if(ok){ alert('Ø®ÙˆØ´ Ø¨Ù‡ Ø­Ø§Ù„Øª!'); }
    }

    // Ø§Ø¬Ø±Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ
    scheduleCheck(); updateProgress();

    // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯: ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±Ø¨Ø± ØµÙØ­Ù‡ Ø±Ø§ Ù…ÛŒâ€ŒØ¨Ù†Ø¯Ø¯ØŒ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù†Ø´ÙˆØ¯ ÙˆÙ„ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø§Ù‚ÛŒ Ø¨Ù…Ø§Ù†Ø¯
    window.addEventListener('beforeunload', ()=>{});
  </script>
</body>
</html>
